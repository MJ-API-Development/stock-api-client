{% extends "layouts/layout.html" %}
{% block title %}
    <title>EOD Stock API - {{ plan.plan_name }} Subscription Plan</title>
{% endblock %}

{% block seo_tags %}
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="EOD Stock API Subscription plans - {{ plan.description }}">
    <meta name="keywords" content="EOD Stock API, End of Day Stock Data, Fundamental Data, Stock Options Data, Financial News API, Social Media Trend Data, Sentiment Analysis for News, Real-time Stock Data">
    <meta name="author" content="MJ API Development">

    <meta property="og:title" content="EOD Stock API - {{ plan.plan_name }} Subscription Plan">
    <meta property="og:description" content="EOD Stock API Subscription plan {{ plan.description }}">
    <meta property="og:image" content="{{ url_for('static', filename='images/logo.png', _external=True) }}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:type" content="website">

    <meta name="twitter:title" content="EOD Stock API - {{ plan.plan_name }} Subscription Plan">
    <meta name="twitter:description" content="EOD Stock API Subscription plan {{ plan.description }}">
    <meta name="twitter:image" content="{{ url_for('static', filename='images/logo.png', _external=True) }}">
    <meta name="twitter:card" content="summary">

    <meta name="application-name" content="EOD Stock API">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    {#<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">#}
{% endblock %}

{% block headers %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "EOD Stock Market API Subscriptions",
  "name": "{{ plan.plan_name }} Plan",
  "description": "{{ plan.description }}",
  "offers": {
    "@type": "Offer",
    "price": "{{ plan.Amount }}",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock"
  }
}
</script>
<style>

    #paypal-button-container {
      max-width: 150px;
    }
</style>
<script src="https://www.paypal.com/sdk/js?client-id={{ paypal_settings.CLIENT_ID }}&currency=USD&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>
{% endblock %}
{% block content %}
<div class="right_col" role="main">
<div class="col-md-12">
            {#  TODO include plan details #}
            {% if plan.plan_name == 'BUSINESS' %}
                {% include 'dashboard/plans/business.html' %}
            {% elif plan.plan_name == 'BASIC' %}
                {% include 'dashboard/plans/basic.html' %}
            {% elif plan.plan_name == 'ENTERPRISE' %}
                {% include 'dashboard/plans/enterprise.html' %}
            {% elif plan.plan_name == 'PROFESSIONAL' %}
                {% include 'dashboard/plans/professional.html' %}
            {% else %}
                {% include 'dashboard/plans/basic.html' %}
            {% endif %}

            <div class="card-body">
                <form class="form-horizontal">
                  <div id="paypal-button-container"></div>
                </form>
            </div>

            <form class="form-horizontal" id="user_subscription_data_form">
                {% if user_data %}
                <input id="uuid" type="hidden" value="{{ user_data.uuid }}" />


                <input id="plan_id" type="hidden" value="{{ plan.plan_id }}" />
                <input id="paypal_id" type="hidden" value="{{ plan.paypal_id }}" />
            </form>
            {% else %}
                    <div class="card">
                        <div class="card-header">
                            <a href="{{ url_for('auth.login') }}"> <h3 class="card-title"> Login to subscribe to this plan</h3></a>
                        </div>
                    </div>

            {% endif %}
            <div class="text-body" id="subscription_response_message"></div>
        </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  <!-- Include the PayPal JavaScript SDK -->
    {% if user_data %}
        <script src="{{ url_for('static', filename='js/paypal_button.js') }}"></script>
    {% endif %}
{% endblock %}

