{% extends "layouts/layout.html" %}
{% block title %}
    <title>EOD Stock Market API - {{ plan.plan_name }} Subscription Plans</title>
{% endblock %}
{% block seo_tags %}
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="EOD Stock API Subscription plans - {{ plan.description }}">
    <meta name="keywords" content="EOD Stock API, End of Day Stock Data, Fundamental Data, Stock Options Data, Financial News API, Social Media Trend Data, Sentiment Analysis for News, Real-time Stock Data">
    <meta name="author" content="MJ API Development">

    <meta property="og:title" content="EOD Stock API - {{ plan.plan_name }} Subscription Plan">
    <meta property="og:description" content="EOD Stock API Subscription plan {{ plan.description }}">
    <meta property="og:image" content="{{ url_for('static', filename='images/logo.png', _external=True) }}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:type" content="website">

    <meta name="twitter:title" content="EOD Stock API - {{ plan.plan_name }} Subscription Plan">
    <meta name="twitter:description" content="EOD Stock API Subscription plan {{ plan.description }}">
    <meta name="twitter:image" content="{{ url_for('static', filename='images/logo.png', _external=True) }}">
    <meta name="twitter:card" content="summary">

    <meta name="application-name" content="EOD Stock API">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

{% endblock %}
{% block headers %}
{% if plan.plan_name == 'BASIC' %}
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Service",
      "name": "{{ plan.plan_name }} Plan",
      "description": "EOD Stock Market API - {{ plan.description }}",
      "offers": {
        "@type": "Offer",
        "price": "{{ plan.Amount }}",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-01-01",
        "availability": "https://schema.org/OnlineOnly",
      "trial":{
        "@type":"Offer",
        "name": "1 Month Free Trial of Basic Plan",
        "description": "EOD Stock Market API - {{ plan.description }}",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/OnlineOnly"
      }
      }
    }
</script>
{% else %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Service",
      "name": "{{ plan.plan_name }} Plan",
      "description": "EOD Stock Market API - {{ plan.description }}",
      "offers": {
        "@type": "Offer",
        "price": "{{ plan.Amount }}",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-01-01",
        "availability": "https://schema.org/OnlineOnly"
      }
    }
    </script>
{% endif %}
<style>
    #paypal-button-container {
      max-width: 150px;
    }
    .footer-menu {
        list-style-type: none;
        margin: 0;
        padding: 0;
        display: flex;
    }
    .footer-menu li {
        margin-right: 20px;
    }
    .footer-menu li:last-child {
        margin-right: 0;
    }
    .footer-menu li a {
        text-decoration: none;
        color: #000;
        font-weight: bold;
    }
</style>
<script src="https://www.paypal.com/sdk/js?client-id={{ paypal_settings.CLIENT_ID }}&currency=USD&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>
{% endblock %}
{% block content %}
<div class="right_col" role="main">
<div class="col-md-12">
            {#  TODO include plan details #}
            {% if plan.plan_name == 'BUSINESS' %}
                {% include 'dashboard/plans/business.html' %}
            {% elif plan.plan_name == 'BASIC' %}
                {% include 'dashboard/plans/basic.html' %}
            {% elif plan.plan_name == 'ENTERPRISE' %}
                {% include 'dashboard/plans/enterprise.html' %}
            {% elif plan.plan_name == 'PROFESSIONAL' %}
                {% include 'dashboard/plans/professional.html' %}
            {% else %}
                {% include 'dashboard/plans/basic.html' %}
            {% endif %}
            <div class="card-body">
                <form class="form-horizontal">
                  <div id="paypal-button-container"></div>
                </form>
            </div>
            {% if user_data %}
                <form class="form-horizontal" id="user_subscription_data_form">
                    <input id="uuid" type="hidden" value="{{ user_data.uuid }}" />
                    <input id="plan_id" type="hidden" value="{{ plan.plan_id }}" />
                    <input id="paypal_id" type="hidden" value="{{ plan.paypal_id }}" />
                </form>
            {% else %}
                <div class="card">
                    <div class="card-header">
                        <a href="{{ url_for('auth.login') }}">
                            <span
                                    class="btn btn-dark"
                                    title="Login or Create an Account in order to subscribe"><i class="fa fa-user-plus"> </i> Login / Create Account</span></a>
                    </div>
                    <div class="card-body">
                        <span>In order to subscribe you need to create an account</span>
                    </div>
                    <div class="card-footer">
                        <ul class="footer-menu">
                            {% if plan.plan_name == "BASIC" %}
                            <li><span
                                   class="font-weight-bold text-dark"
                                   title="EOD Stock Market API - Basic Plan">Basic Plan</span></li>
                            {% else %}
                            <li><a href="/plan-descriptions/basic"
                                   class="font-weight-bold text-info"
                                   title="EOD Stock Market API - Basic Plan">Basic Plan</a></li>
                            {% endif %}
                            {% if plan.plan_name == "PROFESSIONAL" %}
                            <li><span
                                   class="font-weight-bold text-dark"
                                   title="EOD Stock Market API - Professional Plan">Professional Plan</span></li>
                            {% else %}
                            <li><a href="/plan-descriptions/professional"
                                   class="font-weight-bold text-info"
                                   title="EOD Stock Market API - Professional Plan">Professional Plan</a></li>
                            {% endif %}
                            {% if plan.plan_name == "BUSINESS" %}
                            <li><span
                                   class="font-weight-bold text-dark"
                                   title="EOD Stock Market API - Business Plan">Business Plan</span></li>
                            {% else %}
                            <li><a href="/plan-descriptions/business"
                                   class="font-weight-bold text-info"
                                   title="EOD Stock Market API - Business Plan">Business Plan</a></li>
                            {% endif %}
                            {% if plan.plan_name == "ENTERPRISE" %}
                            <li><span
                                   class="font-weight-bold text-dark"
                                   title="EOD Stock Market API - Enterprise Plan">Enterprise Plan</span></li>
                            {% else %}
                            <li><a href="/plan-descriptions/enterprise"
                                   class="font-weight-bold text-info"
                                   title="EOD Stock Market API - Enterprise Plan">Enterprise Plan</a></li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            {% endif %}
            <div class="text-body" id="subscription_response_message"></div>
        </div>
  </div>
{% endblock %}
{% block scripts %}
    {% if user_data %}
        <script src="{{ url_for('static', filename='js/paypal_button.js') }}"></script>
    {% endif %}
{% endblock %}

